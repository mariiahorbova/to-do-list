{% extends "base.html" %}

{% block content %}
  <h1>
    TODO list
    <a href="{% url 'to_do_list:task-create' %}" class="btn btn-primary link-to-page">
      Add task
    </a>
  </h1>
  {% if task_list %}
    <div>
      {% for task in task_list %}
          <form action="{% url 'to_do_list:task-update-state' pk=task.id %}" method="post">
            {% csrf_token %}
            {% if task.is_done %}
              <input
                    type="submit"
                    class="btn btn-secondary link-to-page"
                    value="Undo" />
            {% else %}
              <input
                    type="submit"
                    class="btn btn-success link-to-page"
                    value="Complete" />
            {% endif %}
          </form>
          <strong><a href="{% url "to_do_list:task-detail" pk=task.id %} ">{{ task.content }}</a></strong>
          {% if not task.is_done %}
            <button class="btn-danger">NOT DONE</button>
          {% else %}
            <button class="btn-success">DONE</button>
          {% endif %}
          <h6>Created at: {{ task.creation_date }}
          {% if task.deadline %}
            Deadline: {{ task.deadline }}
          {% endif %}
          </h6>
          <h6 class="text-muted">Tags: {% for tag in task.tags.all %} {{ tag }} {% endfor %}
          <a href="{% url 'to_do_list:task-update' pk=task.id %}">
            Update
          </a>
          <a href="{% url 'to_do_list:tag-delete' pk=task.id %}">
            Delete
          </a>
          </h6>
        <hr>
      {% endfor %}
    </div>
  {% else %}
    <p>There are no tasks.</p>
  {% endif %}
{% endblock %}
